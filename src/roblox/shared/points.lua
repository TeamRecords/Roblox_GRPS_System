-- deterministic points math
local M={}
function M.calculateDelta(e,ctx,w) if e.type=='activity'then return w.activity_tick_5min or 1 elseif e.type=='training'then return w.training_complete or 15 elseif e.type=='operation'then return w.operation_complete or 25 elseif e.type=='ko'then return w.ko or 0.25 elseif e.type=='wo'then return w.wo or -0.1 elseif e.type=='recommendation_cmd'then return w.recommendation_cmd or 10 elseif e.type=='recommendation_ccm'then return w.recommendation_ccm or 20 end return 0 end function M.applyCaps(today,week,delta,caps) local d=caps.daily or math.huge local wcap=caps.weekly or math.huge local a=delta if today+a>d then a=d-today end if week+a>wcap then a=wcap-week end return a end return M
