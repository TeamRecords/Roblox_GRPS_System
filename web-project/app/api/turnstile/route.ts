export async function POST(req:Request){const{token,remoteip}=await req.json();if(!process.env.TURNSTILE_SECRET){return new Response(JSON.stringify({ok:false,error:'Server not configured'}),{status:500});}const f=new FormData();f.append('secret',process.env.TURNSTILE_SECRET!);f.append('response',token);if(remoteip)f.append('remoteip',remoteip);const r=await fetch('https://challenges.cloudflare.com/turnstile/v0/siteverify',{method:'POST',body:f});const data=await r.json();const ok=!!data.success;return new Response(JSON.stringify({ok}),{headers:{'content-type':'application/json'},status:ok?200:400});}
